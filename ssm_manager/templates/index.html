<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>SSM Manager</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/bootstrap-icons.min.css">
    <link rel="stylesheet" href="css/all.min.css">
    <link rel="stylesheet" href="css/app.css">
    <script src="js/bootstrap.bundle.min.js" defer></script>
    <script src="js/vue.global.prod.js" defer></script>
    <script src="js/app.js" defer></script>
</head>
<body>
  <main id="app" class="d-flex flex-nowrap">

<!-- navbar -->

    <div class="d-flex flex-column flex-shrink-0 bg-body-tertiary" style="width: 4.5rem;">
      <a href="#/start" class="d-block p-3 link-body-emphasis text-decoration-none">
        <img width="40" src="/favicon.ico" alt="SSM Manager" class="d-block mx-auto mb-2 logo">
      </a>
      <ul class="nav nav-pills nav-flush flex-column mb-auto text-center">
        <li class="nav-item" v-for="navItem in navBar">
          <a :href="navItem.hash" class="nav-link py-3 border-bottom rounded-0" :class="{ active: currentHash === navItem.hash }" aria-current="page" :aria-label="navItem.name" data-bs-toggle="tooltip" data-bs-placement="right" :data-bs-original-title="navItem.name" @click="hideTooltip($event)">
            <i :class="navItem.icon"></i>
          </a>
        </li>
      </ul>
      <div class="border-top">
        <ul class="nav nav-pills nav-flush flex-column mb-auto text-center">
          <li class="nav-item">
            <a class="nav-link py-3 border-bottom rounded-0 text-secondary" aria-current="page" aria-label="Theme" data-bs-toggle="tooltip" data-bs-placement="right" data-bs-original-title="Theme" @click="themeToggle()">
              <i class="bi bi-circle-half"></i>
            </a>
          </li>
          <li class="nav-item">
            <a :href="githubUrl" class="nav-link py-3 border-bottom rounded-0 text-secondary" target="_blank" rel="noopener noreferrer" aria-current="page" aria-label="GitHub (opens in a new window)" data-bs-toggle="tooltip" data-bs-placement="right" data-bs-original-title="GitHub" @click="hideTooltip($event)">
              <i class="bi bi-github"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>

<!-- page: home -->

    <div id="home" class="container-fluid page m-0">
      <div class="text-center page-body mt-0" style="max-height:100vh;">
        <div class="pt-5 mt-15">
          <img src="/favicon.ico" class="d-block mx-auto mb-4 logo" alt="SSM Manager" width="200">
        </div>
        <h1 class="display-5 fw-bold" v-html="title + ' v' + version"></h1>
        <div class="col-xl-6 mx-auto">
          <p class="lead mb-4">
            SSM Manager is a cross-platform desktop application that provides a web interface for managing AWS Systems Manager sessions.
            It simplifies the process of connecting to EC2 instances through AWS Systems Manager by providing an intuitive interface for Shell sessions, RDP connections, custom port forwarding, and host port forwarding.
          </p>
          <div class="container px-4 pt-5">
            <h2 class="pb-2 border-bottom">Getting Started</h2>
            <div class="row align-items-md-stretch text-start pt-3">
              <div class="col-xxl-6 pb-4">
                <div class="card h-100">
                  <h5 class="card-header">AWS CLI v2</h5>
                  <div class="card-body">
                    <p class="card-text">
                    The AWS Command Line Interface (AWS CLI) is an open source tool that enables you to interact with AWS services using commands in your command-line shell.
                    </p>
                    <a class="btn btn-primary" type="button" href="https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html" target="_blank">Read More</a>
                  </div>
                  <div class="card-footer text-body-secondary text-end d-inline-flex w-100" v-if="depAwsCli">
                    <div class="container">
                      <div class="row d-flex align-items-center">
                        <div class="col text-start">
                          <span class="text-success" v-if="!depAwsCliUpdateAvailable">Installed</span>
                          <span class="text-warning" v-if="depAwsCliUpdateAvailable">Update Available</span>
                        </div>
                        <div class="col text-end">
                          <span class="me-2" :class="depAwsCliUpdateAvailable ? 'text-warning' : 'text-success'" v-html="'v' + depAwsCliInstalled"></span>
                          <span class="ms-2 text-primary">
                            <a type="button"
                              class="btn btn-warning d-inline-flex align-items-center"
                              style="--bs-btn-padding-y: .1rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem; margin-right: .15rem;"
                              v-for="url in depAwsCliUrls"
                              :href="url.link"
                              :title="'Download AWS CLI v' + depAwsCliLatest"
                              target="_blank"
                              rel="noopener noreferrer"
                              v-if="depAwsCliUpdateAvailable"
                            >
                              <span><i class="bi bi-cloud-download" style="font-size:.75rem;"></i></span>
                              <span v-html="url.extension.toUpperCase()" class="ms-1"></span>
                            </a>
                            <span v-if="!depAwsCliUpdateAvailable" title="Up to date">
                              <i class="bi bi-check-circle text-success"></i>
                            </span>
                          </span>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="card-footer text-body-secondary" v-if="!depAwsCli">
                    <div class="container">
                      <div class="row d-flex align-items-center">
                        <div class="col text-start">
                          <span class="text-info" :class="{'text-danger': depAwsCliInstalled == 'Not Installed'}" v-html="depAwsCliInstalled"></span>
                        </div>
                        <div class="col text-end">
                          <span class="ms-2 text-primary">
                            <a type="button"
                              class="btn btn-primary d-inline-flex align-items-center"
                              style="--bs-btn-padding-y: .1rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem; margin-right: .15rem;"
                              v-for="url in depAwsCliUrls"
                              :href="url.link"
                              :title="'Download AWS CLI v' + depAwsCliLatest"
                              target="_blank"
                              rel="noopener noreferrer"
                            >
                              <span><i class="bi bi-cloud-download" style="font-size:.75rem;"></i></span>
                              <span v-html="url.extension.toUpperCase()" class="ms-1"></span>
                            </a>
                          </span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-xxl-6 pb-4">
                <div class="card h-100">
                  <h5 class="card-header">Session Manager Plugin</h5>
                  <div class="card-body">
                    <p class="card-text">
                      To initiate Session Manager sessions with your managed nodes by using the AWS Command Line Interface (AWS CLI), you must install the Session Manager plugin on your local machine.
                    </p>
                    <a class="btn btn-primary" type="button" href="https://docs.aws.amazon.com/systems-manager/latest/userguide/session-manager-working-with-install-plugin.html" target="_blank">Read More</a>
                  </div>
                  <div class="card-footer text-body-secondary text-end" v-if="depSessionManagerPlugin">
                    <div class="container">
                      <div class="row d-flex align-items-center">
                        <div class="col text-start">
                          <span class="text-success" v-if="!depSessionManagerPluginUpdateAvailable">Installed</span>
                          <span class="text-warning" v-if="depSessionManagerPluginUpdateAvailable">Update Available</span>
                        </div>
                        <div class="col text-end d-flex align-items-center justify-content-end">
                          <span class="me-2" :class="depSessionManagerPluginUpdateAvailable ?  'text-warning' : 'text-success'" v-html="'v' + depSessionManagerPluginInstalled"></span>
                          <span class="ms-2 text-primary d-flex align-items-center
                            justify-content-end">
                            <a type="button"
                              class="btn btn-warning d-inline-flex align-items-center"
                              style="--bs-btn-padding-y: .1rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem; margin-right: .15rem;"
                              v-for="url in depSessionManagerPluginUrls"
                              :href="url.link"
                              :title="'Download Session Manager Plugin v' + depSessionManagerPluginLatest"
                              target="_blank"
                              rel="noopener noreferrer"
                              v-if="depSessionManagerPluginUpdateAvailable"
                            >
                              <span><i class="bi bi-cloud-download" style="font-size:.75rem;"></i></span>
                              <span v-html="url.extension.toUpperCase()" class="ms-1"></span>
                            </a>
                            <span v-if="!depSessionManagerPluginUpdateAvailable" title="Up to date">
                              <i class="bi bi-check-circle text-success"></i>
                            </span>
                          </span>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="card-footer text-body-secondary" v-if="!depSessionManagerPlugin">
                    <div class="container">
                      <div class="row">
                        <div class="col text-start">
                          <span class="text-info" :class="{ 'text-danger': depSessionManagerPluginInstalled == 'Not Installed'}" v-html="depSessionManagerPluginInstalled"></span>
                        </div>
                        <div class="col text-end">
                          <span class="ms-2 text-primary">
                            <a type="button"
                              class="btn btn-primary d-inline-flex align-items-center"
                              style="--bs-btn-padding-y: .1rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem; margin-right: .15rem;"
                              v-for="url in depSessionManagerPluginUrls"
                              :href="url.link"
                              :title="'Download Session Manager Plugin v' + depSessionManagerPluginLatest"
                              target="_blank"
                              rel="noopener noreferrer"
                            >
                              <span><i class="bi bi-cloud-download" style="font-size:.75rem;"></i></span>
                              <span v-html="url.extension.toUpperCase()" class="ms-1"></span>
                            </a>
                          </span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row align-items-md-stretch text-start" v-if="isWindows">
              <div class="col-xl-12 pb-4">
                <div class="card h-100">
                  <h5 class="card-header">Install and Update on Windows</h5>
                  <div class="card-body">
                    <p class="card-text">
                      To install or update SSM Manager on Windows, you can use the following PowerShell command:
                    </p>
                    <p class="card-text p-2 alert alert-light">
                      <code>
                        Invoke-WebRequest -Uri "https://raw.githubusercontent.com/napalm255/ssm-manager/refs/heads/main/install.ps1" -OutFile "$env:TEMP\ssm-manager-install.ps1"; & "$env:TEMP\ssm-manager-install.ps1"
                      </code>
                    </p>
                    <p class="small text-muted">This command needs to be run as Administrator in order to install in "C:\Program Files (x86)\ssm_manager".</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

<!-- page: instances -->

    <div id="instances" class="container-fluid page">
      <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom">
        <h1 class="h2">Instances</h1>
        <div class="btn-toolbar mb-2 mb-md-0">
          <div class="btn-group mr-2">
            <!-- Buttons -->
            <div class="row g-3 align-items-center">
              <div class="col-auto">
                <select id="profileSelect" class="form-select" v-model="currentProfile">
                  <option value="">Select Profile</option>
                  <option v-for="profile in profiles" :value="profile.name" v-html="profile.name"></option>
                </select>
              </div>
              <div class="col-auto">
                <select id="regionSelect" class="form-select" v-model="currentRegion">
                  <option value="">Select Region</option>
                  <option v-for="region in regionsSelected" :value="region" v-html="region"></option>
                </select>
              </div>
              <div class="col-auto">
                <button id="connectBtn" class="btn btn-sm btn-success" @click="connect()" :disabled="isConnecting">
                  <span v-if="isConnecting" class="spinner-border spinner-border-sm" aria-hidden="true"></span>
                  <output v-if="isConnecting" class="visually-hidden">Connecting...</output>
                  <i v-if="!isConnecting" class="bi bi-search"></i>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row page-body d-flex flex flex-md-row">
        <div class="col-md-7 order-2 order-md-1 d-md-flex flex-md-row h-100">
          <!-- Instances card-->
          <div class="card mb-4 shadow-sm instances-card flex-grow-1 overflow-y-auto w-100">
            <div class="card-header d-flex justify-content-between align-items-center">
              <div class="d-flex align-items-center gap-2">
                <i class="bi bi-hdd-rack-fill"></i>
                <div class="m-0">Instances</div>
              </div>
              <div>
                <span class="badge bg-info" v-if="currentAccountId != ''" v-html="'AWS Account Id: ' + currentAccountId"></span>
                <span class="m-1"></span>
                <span class="badge" :class="instancesCount > 0 ? 'bg-primary' : 'bg-secondary'" v-html="instancesCount + ' instances'"></span>
              </div>
            </div>
            <div class="card-body-flush overflow-y-auto w-100 position-relative instances-card-body">
              <!-- Instances Table -->
              <div class="text-center text-muted p-4 h-100" v-if="instancesCount == 0">
                <i class="bi bi-hdd-rack fs-3"></i>
                <p class="mt-2">No instances found</p>
              </div>
              <div class="accordion accordion-flush" id="accordionInstances">
                <div class="accordion-item" v-for="instance in instances" :key="instance.name">
                  <h2 class="accordion-header d-flex justify-content-between align-items-center">
                    <button
                      class="accordion-button collapsed flex-grow-1"
                      type="button"
                      data-bs-toggle="collapse"
                      :data-bs-target="'#' + instance.id"
                      aria-expanded="false"
                      :aria-controls="instance.id"
                      @click.once="getInstanceDetails(instance.id)"
                    >
                      <div class="text-start d-flex w-100">
                        <div class="row d-flex w-100">
                          <div class="col-2 align-middle text-center" style="width:25px;">
                            <span class="text-success align-middle" v-if="instance.state == 'running'" title="Running"><i class="bi bi-check-circle-fill"></i></span>
		                        <span class="text-danger align-middle" v-if="instance.state == 'stopped'" title="Stopped"><i class="bi bi-stop-circle-fill"></i></span>
		                        <span class="text-danger align-middle" v-if="instance.state == 'terminated'" title="Terminated"><i class="bi bi-x-circle"></i></span>
                          </div>
                          <div class="col-10">
                            <div><b><span v-html="instance.name"></span></b></div>
                            <small class="text-muted" style="font-size: .825rem;" v-html="instance.id"></small>
                          </div>
                        </div>
                      </div>
                    </button>
                    <div class="d-flex me-1">
                      <button class="btn btn-sm start-shell me-2" title="Shell" @click="startShell(instance.id, instance.name)" :disabled="isShellStarting.includes(instance.id)">
                        <span v-if="isShellStarting.includes(instance.id)" class="spinner-border spinner-border-sm" aria-hidden="true"></span>
                        <output v-if="isShellStarting.includes(instance.id)" class="visually-hidden">Starting Shell...</output>
                        <i v-if="!isShellStarting.includes(instance.id)" class="bi bi-terminal"></i>
                      </button>
                      <button class="btn btn-sm start-rdp me-2" title="RDP" @click="startRdp(instance.id, instance.name)" :disabled="isRdpStarting.includes(instance.id)">
                        <span v-if="isRdpStarting.includes(instance.id)" class="spinner-border spinner-border-sm" aria-hidden="true"></span>
                        <output v-if="isRdpStarting.includes(instance.id)" class="visually-hidden">Starting RDP...</output>
                        <i v-if="!isRdpStarting.includes(instance.id)" class="bi bi-display"></i>
                      </button>
                      <button class="btn btn-sm start-port-forward text-white me-2" title="Port Forwarding" @click="showPortForwardingModal(instance.id, instance.name)">
                        <i class="bi bi-arrow-left-right"></i>
                      </button>
                      <div class="dropdown">
                        <button class="btn btn-sm btn-opts" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                          <i class="bi bi-three-dots-vertical"></i>
                        </button>
                        <ul class="dropdown-menu" style="font-size: .9rem;">
                            <li><h6 class="dropdown-header">Instance Settings</h6></li>
                            <li><a class="dropdown-item" href="#" @click="showPortMappingsModal(instance.id, instance.name)">Edit Port Mappings</a></li>
                        </ul>
                      </div>
                    </div>
                  </h2>
                  <!-- Instance Details -->
                  <div :id="instance.id" class="accordion-collapse collapse">
                    <div class="accordion-body m-0 pt-0 pb-2 px-4 position-relative">
                      <div class="row">
                        <div class="col">
                          <small class="text-success ps-2" v-if="instance.state == 'running'" title="Running"><i class="bi bi-check-circle-fill"></i><span class="ps-1">Running</span></small>
                          <small class="text-danger ps-2" v-if="instance.state == 'stopped'" title="Stopped"><i class="bi bi-stop-circle-fill"></i><span class="ps-1">Stopped</span></small>
                          <small class="text-danger ps-2" v-if="instance.state == 'terminated'" title="Terminated"><i class="bi bi-x-circle"></i><span class="ps-1">Terminated</span></small>
                        </div>
                        <div class="col">
	                        <small class="text-muted ps-2" v-if="instance.os == 'Windows'"><i class="bi bi-windows"></i><span class="ps-1">Windows</span></small>
		                      <small class="text-muted ps-2" v-if="instance.os == 'Linux' || instance.os == 'Linux/UNIX'"><i class="bi bi-tux"></i><span class="ps-1">Linux</span></small>
		                      <small class="text-muted ps-2" v-if="instance.os != 'Linux' && instance.os != 'Linux/UNIX' && instance.os != 'Windows'">
                            <i class="bi bi-pc"></i><span class="ps-1" v-html="instance.os"></span>
                          </small>
                        </div>
                        <div class="col">
		                      <small class="text-muted ps-2" v-if="instance.type"><i class="bi bi-hdd-rack-fill"></i><span class="ps-1" v-html="instance.type" style="cursor: pointer;" @click="copyToClipboard(instance.type)"></span></small>
                        </div>
                      </div>
                      <div class="row border-top">
                        <div class="col-3 text-end fw-bold"><small>Port Mappings</small></div>
                        <div class="col-9 text-start text-muted">
                          <div class="row" v-if="!portMappings[instance.name] || portMappings[instance.name].length === 0">
                            <div class="col-12 text-start"><small class="text-secondary">No port mappings configured</small></div>
                          </div>
                          <div class="row" v-for="port in portMappings[instance.name]" v-if="instance.name in portMappings">
                            <div class="col-3 text-start"><span v-text="port.local_port"></span></div>
                            <div class="col-1 text-start"><i class="bi bi-arrow-right-short"></i></div>
                            <div class="col-8 text-start text-truncate" :title="port.remote_host != '' ? port.remote_host + ':' + port.remote_port : port.remote_port">
                              <span v-text="port.remote_host"></span><span v-if="port.remote_host != ''">:</span><span v-text="port.remote_port"></span>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="row border-top" v-for="column in instanceDetailsColumns">
                        <div class="col-3 text-end fw-bold"><small v-html="column.title"></small></div>
                        <div class="col-9 text-start text-muted">
                          <small v-if="instance.id in instancesDetails" v-html="instancesDetails[instance.id][column.field]" style="cursor: pointer;" @click="copyToClipboard(instancesDetails[instance.id][column.field])"></small>
                        </div>
                      </div>
                      <!-- Loading Spinner -->
                      <div v-if="!(instance.id in instancesDetails)" class="d-flex justify-content-center position-absolute top-0 bottom-0 start-0 end-0 bg-light opacity-75">
                        <output class="spinner-border text-primary loading-instance-details">
                          <span class="visually-hidden">Loading...</span>
                        </output>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Loading Spinner -->
              <div v-if="isConnecting" class="d-flex justify-content-center position-absolute top-0 bottom-0 start-0 end-0 bg-light opacity-75">
                <output class="spinner-border text-primary loading-instances">
                  <span class="visually-hidden">Loading...</span>
                </output>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-5 order-1 order-md-2">
          <!-- Active Connections card-->
          <div class="card mb-4 shadow-sm active-connections-card flex-grow-1 overflow-y-auto w-100">
            <div class="card-header d-flex justify-content-between align-items-center">
              <div class="d-flex align-items-center gap-2">
                <i class="bi bi-diagram-2-fill"></i>
                <div class="m-0">Active Connections</div>
              </div>
              <span class="badge" :class="activeConnectionsCount > 0 ? 'bg-primary' : 'bg-secondary'" v-html="activeConnectionsCount + ' active'"></span>
            </div>
            <div class="card-body-flush active-connections-card-body overflow-y-auto w-100 position-relative">
              <!-- Active Connections Table -->
              <div class="text-center text-muted p-4 h-100" v-if="activeConnectionsCount == 0">
                <i class="bi bi-diagram-2 fs-3"></i>
                <p class="mt-2">No active connections</p>
              </div>
              <ol class="list-group list-group-flush">
                <li class="list-group-item d-flex justify-content-between align-items-start ps-1 pe-2 py-3 m-0" v-for="connection in activeConnections">
                  <div class="text-start d-flex w-100">
                    <div class="row d-flex w-100">
                      <div class="col-3 align-middle text-center" style="width:50px;">
                        <button class="btn btn-sm connection-shell mx-2" title="Shell" v-if="connection.type == 'Shell'">
                          <i class="bi bi-terminal"></i>
                        </button>
                        <button class="btn btn-sm connection-rdp mx-2" title="RDP" v-if="connection.type == 'RDP'" @click="openRdpClient(connection.local_port)">
                          <i class="bi bi-display"></i>
                        </button>
                        <button class="btn btn-sm connection-port-forward text-white mx-2" title="Port Forwarding" v-if="connection.type == 'Custom Port' || connection.type == 'Remote Host Port'">
                          <i class="bi bi-arrow-left-right"></i>
                        </button>
                      </div>
                      <div class="col-9">
                        <div><b><span v-html="connection.name"></span></b></div>
                        <div>
                          <small class="text-muted" v-if="connection.local_port" v-html="connection.local_port"></small>
                          <i class="bi bi-arrow-right-short" v-if="connection.local_port"></i>
                          <small class="text-muted" v-if="connection.remote_host" v-html="connection.remote_host + ':'"></small>
                          <small class="text-muted" v-if="connection.remote_port" v-html="connection.remote_port"></small>
                        </div>
                        <div><small class="text-muted" v-html="timeAgo(connection.timestamp)"></small></div>
                        <div>
                          <small class="badge text-white me-1" style="background-color: #6495ed" v-html="connection.region"></small>
                          <small class="badge text-white" style="background-color: #6495ed" v-html="connection.profile"></small>
                        </div>
                      </div>
                    </div>
                  </div>
                  <button class="btn btn-sm btn-outline-danger" @click="disconnect(connection.connection_id)">
                    <i class="bi bi-x-lg"></i>
                  </button>
                </li>
              </ol>
            </div>
          </div>
        </div>
      </div>
    </div>

<!-- page: preferences -->

    <div id="preferences" class="container-fluid page">
      <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom">
        <h1 class="h2">Preferences</h1>
        <div class="text-danger" v-if="preferencesUnsaved">
          <small><i class="bi bi-exclamation-triangle-fill"></i> You have unsaved changes</small>
        </div>
        <div class="btn-toolbar mb-2 mb-md-0">
          <div class="btn-group mr-2">
            <!-- Buttons -->
            <button type="button" class="btn btn-sm btn-outline-success save-button" @click="savePreferences()"
                                  :disabled="isPreferencesSaving || !preferencesUnsaved">
              <span v-if="isPreferencesSaving" class="spinner-border spinner-border-sm" aria-hidden="true"></span>
              <output v-if="isPreferencesSaving" class="visually-hidden">Saving...</output>
              <span v-if="!isPreferencesSaving"><i class="bi bi-floppy-fill"></i></span>
              &nbsp;&nbsp;Save
            </button>
          </div>
        </div>
      </div>
      <div class="row page-body">
        <div class="col-lg-6">
          <!-- Regions card-->
          <div class="card mb-4 shadow-sm">
            <div class="card-header d-flex justify-content-between align-items-center">
              <div class="d-flex align-items-center gap-2">
                <i class="bi bi-geo-alt-fill"></i>
                <div class="m-0">Regions</div>
              </div>
              <span class="badge" :class="prefRegionsCount > 0 ? 'bg-primary' : 'bg-secondary'" v-html="prefRegionsCount + ' selected regions'"></span>
            </div>
            <div class="card-body">
              <h5 class="mb-1">Visible Regions</h5>
              <p class="small text-muted">Selecting regions will limit the regions that are visible in the application. This is useful if you only work with a specific set of regions and want to reduce clutter.</p>
              <p class="small text-muted">If no regions are selected, all regions will be visible.</p>
              <form>
                <div class="form-check">
                  <select class="form-select" id="prefRegions" name="prefRegions" size="8" multiple v-model="prefRegions">
                    <option v-for="region in regionsAll" :value="region" v-html="region"></option>
                  </select>
                </div>
              </form>
            </div>
          </div>
          <!-- Port Forwarding card-->
          <div class="card mb-4 shadow-sm">
            <div class="card-header d-flex justify-content-between align-items-center">
              <div class="d-flex align-items-center gap-2">
                <i class="bi bi-arrow-left-right"></i>
                <div class="m-0">Port Forwarding</div>
              </div>
            </div>
            <div class="card-body">
              <h5 class="mb-1">Default Options</h5>
              <p class="small text-muted"> These options will be used as defaults when initiating a port forwarding session. They can be overridden on a per-instance basis. </p>
              <form>
                <div class="mb-3">
                  <label class="small mb-1" for="prefPortForwardingMode">Mode</label>
                  <select class="form-select" id="portForwardingMode" v-model="prefPortForwardingMode">
                    <option value="local">Remote Port</option>
                    <option value="other">Remote Host and Port</option>
                  </select>
                </div>
                <div class="mb-3">
                  <label class="small mb-1" for="prefPortForwardingRemotePort">Remote Port</label>
                  <input class="form-control" id="prefPortForwardingRemotePort" type="number" placeholder="1433" min="1024" v-model="prefPortForwardingRemotePort">
                </div>
                <div class="mb-3">
                  <label class="small mb-1" for="prefPortForwardingRemoteHost">Remote Host</label>
                  <input class="form-control" id="prefPortForwardingRemoteHost" type="text" v-model="prefPortForwardingRemoteHost">
                </div>
              </form>
            </div>
          </div>
          <!-- Port Range card-->
          <div class="card mb-4 shadow-sm">
            <div class="card-header d-flex justify-content-between align-items-center">
              <div class="d-flex align-items-center gap-2">
                <i class="bi bi-ethernet"></i>
                <div class="m-0">Ports</div>
              </div>
              <span class="badge" :class="prefPortCount > 0 ? 'bg-primary' : 'bg-danger'" v-html="prefPortCount + ' ports in range'"></span>
            </div>
            <div class="card-body">
              <h5 class="mb-1">Dynamic Port Range</h5>
              <p class="small text-muted">This range is used to dynamically and randomly allocate ports for host port forwarding when connecting to instances.</p>
              <p class="small text-muted">Ports are checked for availability before being allocated, and if a port is already in use, the next available random port in the range will be used.</p>
              <form>
                <div class="mb-3">
                  <label class="small mb-1" for="prefPortStart">Starting Port</label>
                  <input class="form-control" id="prefPortStart" type="number" placeholder="60000" min="1024" v-model="prefPortStart">
                </div>
                <div class="mb-3">
                  <label class="small mb-1" for="prefPortEnd">Ending Port</label>
                  <input class="form-control" id="prefPortEnd" type="number" placeholder="65535" max="65535" v-model="prefPortEnd">
                </div>
              </form>
            </div>
          </div>
        </div>
        <div class="col-lg-6">
          <!-- Credentials card-->
          <div class="card mb-4 shadow-sm">
            <div class="card-header d-flex justify-content-between align-items-center">
              <div class="d-flex align-items-center gap-2">
                <i class="bi bi-shield-lock-fill"></i>
                <div class="m-0">Credentials</div>
              </div>
              <span>
                <span class="badge me-2" :class="prefCredentialsCount > 0 ? 'bg-primary' : 'bg-secondary'" v-html="prefCredentialsCount + ' credentials'"></span>
                <button type="button" class="btn btn-outline-success btn-sm" @click="addCredential"><i class="bi bi-plus" style="font-size:18px;"></i></button>
              </span>
            </div>
            <div class="card-body">
              <p class="small text-muted">These credentials will be stored in a key ring on your system.</p>
              <p class="small text-muted" v-if="isWindows">
                On Windows, these will be stored as generic credentials in the Windows Credential Manager.
                They can be used to dynamically create Windows Credentials for tools such as SQL Server Management Studio (SSMS) or other applications that support Windows Authentication.
              </p>
              <p class="small text-muted" v-if="isLinux">
                On Linux, there is currently no supported use for these credentials, but they can be used to store credentials for other applications that support key rings.
              </p>
              <p>
                <span class="text-secondary">
                    Leave the password blank to skip saving or updating.
                </span>
              </p>
              <div v-if="prefCredentialsCount == 0" class="text-center text-muted p-4 h-100 border-top">
                <i class="bi bi-shield-lock fs-3"></i>
                <p class="mt-2">No credentials</p>
              </div>
              <div v-if="prefCredentialsCount > 0" class="row mb-2 align-items-center">
                <div class="col-5 fw-bold">Username</div>
                <div class="col-7 fw-bold">Password</div>
              </div>
              <form v-if="prefCredentialsCount > 0"><div v-for="(cred, index) in prefCredentials" :key="index" class="row mb-2 align-items-center">
                <div class="col-5">
                  <input type="text" class="form-control" v-model="cred.username" placeholder="domain\username" aria-label="Username" aria-describedby="'credUsername' + index" autocomplete="username"
                   :disabled="preferences.credentials.some(c => c.username === cred.username && c !== cred)">
                </div>
                <div class="col-5">
                  <input type="password" class="form-control" v-model="cred.password" placeholder="new password" aria-label="Password" aria-describedby="'credPassword' + index" autocomplete="new-password">
                </div>
                <div class="col-2 align-items-end text-align-end">
                  <button type="button" class="btn btn-sm btn-outline-danger" @click="removeCredential(index)">
                    <i class="bi bi-trash"></i>
                  </button>
                </div>
              </div></form>
            </div>
          </div>
          <!-- Logging card-->
          <div class="card mb-4 shadow-sm">
            <div class="card-header d-flex justify-content-between align-items-center">
              <div class="d-flex align-items-center gap-2">
                <i class="bi bi-journal-text"></i>
                <div class="m-0">Logging</div>
              </div>
            </div>
            <div class="card-body">
              <h5 class="mb-1">Verbosity</h5>
              <p class="small text-muted">This defines the level of detail that will be logged in the application.</p>
              <form>
                <div class="form-check">
                  <input class="form-check-input" id="prefLogLevel1" type="radio" name="prefLogLevel" value="DEBUG" v-model="prefLogLevel">
                  <label class="form-check-label" for="prefLogLevel1">Debug</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" id="prefLogLevel2" type="radio" name="prefLogLevel" value="INFO" v-model="prefLogLevel">
                  <label class="form-check-label" for="prefLogLevel2">Info</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" id="prefLogLevel3" type="radio" name="prefLogLevel" value="WARNING" v-model="prefLogLevel">
                  <label class="form-check-label" for="prefLogLevel3">Warning</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" id="prefLogLevel4" type="radio" name="prefLogLevel" value="ERROR" v-model="prefLogLevel">
                  <label class="form-check-label" for="prefLogLevel4">Error</label>
                </div>
              </form>
            </div>
          </div>
          <!-- Server card -->
          <div class="card mb-4 shadow-sm">
            <div class="card-header d-flex justify-content-between align-items-center">
              <div class="d-flex align-items-center gap-2">
                <i class="bi bi-pc-display"></i>
                <div class="m-0">Server</div>
              </div>
            </div>
            <div class="card-body">
              <h5 class="mb-1">Port</h5>
              <p class="small text-muted">This is the listening port for the local web server used to serve this web interface.</p>
              <form>
                <div class="mb-3">
                  <label class="small mb-1" for="prefServerPort">Server Port</label>
                  <input class="form-control" id="prefServerPort" type="number" placeholder="5000" min="1024" v-model="prefServerPort">
                  <div class="form-text">Default is 5000. Must be between 1024 and 65535.</div>
                  <div class="form-text text-danger" v-if="preferences.server && preferences.server.port != prefServerPort">
                    <i class="bi bi-exclamation-triangle-fill pe-1"></i>
                    Changing the server port will require you to restart the application.
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>

    </div>

<!-- page: profiles -->

    <div id="profiles" class="container-fluid page">
      <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom">
        <h1 class="h2">Profiles</h1>
        <div class="btn-toolbar mb-2 mb-md-0">
          <div class="btn-group mr-2">
            <!-- Buttons -->
          </div>
        </div>
      </div>
      <div class="d-flex flex-column page-body">
        <!-- Sessions card-->
        <div class="card mb-4 shadow-sm">
          <div class="card-header d-flex justify-content-between align-items-center">
            <div class="d-flex align-items-center gap-2">
              <i class="bi bi-link-45deg"></i>
              <div class="m-0">Sessions</div>
              <i class="bi bi-info-circle text-muted" style="font-size: .825rem; cursor: help;" data-bs-toggle="tooltip"
                        data-bs-placement="right"  data-bs-title="Sessions are used to group profiles to a common SSO start URL and region."></i>
            </div>
            <span>
              <span class="badge me-2" :class="sessionsCount > 0 ? 'bg-primary' : 'bg-secondary'" v-html="sessionsCount + ' sessions'"></span>
              <button type="button" class="btn btn-outline-success btn-sm" @click="showAddSessionModal">
                <i class="bi bi-plus"></i>
              </button>
            </span>
          </div>
          <div class="card-body overflow-auto m-0 px-0 pb-0 pt-1">
            <div class="text-center text-muted p-4 h-100" v-if="sessionsCount == 0">
              <i class="bi bi-link fs-3"></i>
              <p class="mt-2">No sessions</p>
            </div>
            <table class="table table-striped table-hover w-100" v-if="sessionsCount > 0">
              <thead class="small text-uppercase">
                <tr>
                  <th v-for="column in sessionsTableColumns" v-html="column.title"></th>
                  <th></th>
                </tr>
              </thead>
              <tbody>
                <tr class="align-middle" v-for="session in sessions">
                  <td v-for="column in sessionsTableColumns" :key="column.field">
                    <span v-html="session[column.field]"></span>
                  </td>
                  <td>
                    <button type="button" class="btn btn-sm btn-outline-danger" @click="deleteSession(session.name)" :disabled="isSessionDeleting.includes(session.name)">
                      <span v-if="isSessionDeleting.includes(session.name)" class="spinner-border spinner-border-sm" aria-hidden="true"></span>
                      <output v-if="isSessionDeleting.includes(session.name)" class="visually-hidden">Deleting...</output>
                      <i v-if="!isSessionDeleting.includes(session.name)" class="bi bi-trash"></i>
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <!-- Profiles card-->
        <div class="card mb-4 shadow-sm">
          <div class="card-header d-flex justify-content-between align-items-center">
            <div class="d-flex align-items-center gap-2">
              <i class="bi bi-person-fill"></i>
              <div class="m-0">Profiles</div>
              <i class="bi bi-info-circle text-muted" style="font-size: .825rem; cursor: help;" data-bs-toggle="tooltip"
                        data-bs-placement="right"  data-bs-title="Profiles define an AWS account and role to assume and can be linked to a session for SSO authentication. These profiles are used when connecting to instances."></i>
            </div>
            <span>
              <span class="badge me-2" :class="profilesCount > 0 ? 'bg-primary' : 'bg-secondary'" v-html="profilesCount + ' profiles'"></span>
              <button type="button" class="btn btn-outline-success btn-sm" @click="showAddProfileModal">
                <i class="bi bi-plus"></i>
              </button>
            </span>
          </div>
          <div class="card-body overflow-auto m-0 px-0 pb-0 pt-1">
            <div class="text-center text-muted p-4 h-100" v-if="profilesCount == 0">
              <i class="bi bi-person fs-3"></i>
              <p class="mt-2">No profiles</p>
            </div>
            <table class="table table-striped table-hover w-100" v-if="profilesCount > 0">
              <thead class="small text-uppercase">
                <tr>
                  <th v-for="column in profilesTableColumns" v-html="column.title"></th>
                </tr>
              </thead>
              <tbody>
                <tr class="align-middle" v-for="profile in profiles">
                  <td v-for="column in profilesTableColumns" :key="column.field">
                    <span v-html="profile[column.field]"></span>
                  </td>
                  <td>
                    <button type="button" class="btn btn-sm btn-outline-danger" @click="deleteProfile(profile.name)" :disabled="isProfileDeleting.includes(profile.name)">
                      <span v-if="isProfileDeleting.includes(profile.name)" class="spinner-border spinner-border-sm" aria-hidden="true"></span>
                      <output v-if="isProfileDeleting.includes(profile.name)" class="visually-hidden">Deleting...</output>
                      <i v-if="!isProfileDeleting.includes(profile.name)" class="bi bi-trash"></i>
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

<!-- page: hosts -->

    <div id="hosts" class="container-fluid page">
      <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom">
        <h1 class="h2">Hosts File</h1>
        <div class="btn-toolbar mb-2 mb-md-0">
          <div class="btn-group mr-2">
            <!-- Buttons -->
          </div>
        </div>
      </div>
      <div class="d-flex flex-column page-body">
        <!-- Hosts card-->
        <div class="card mb-4 shadow-sm">
          <div class="card-header d-flex justify-content-between align-items-center">
            <div class="d-flex align-items-center gap-2">
              <i class="bi bi-pc-display"></i>
              <div class="m-0">Hosts</div>
            </div>
            <span>
              <span class="badge" :class="hostsCount > 0 ? 'bg-primary' : 'bg-secondary'" v-html="hostsCount + ' hosts'"></span>
              <button v-if="isWindows" type="button" class="btn btn-outline-success btn-sm ms-2" @click="showAddHostModal"><i class="bi bi-plus" style="font-size:18px;"></i></button>
            </span>
          </div>
          <div class="card-body overflow-auto m-0 px-0 pb-0 pt-1">
            <div class="text-center text-muted p-4 h-100" v-if="hostsCount == 0">
              <i class="bi bi-pc-display fs-3"></i>
              <p class="mt-2">No hosts</p>
            </div>
            <table class="table table-striped table-hover w-100" v-if="hostsCount > 0">
              <thead class="small text-uppercase">
                <tr>
                  <th v-for="column in hostsTableColumns" v-html="column.title"></th>
                  <th v-if="isWindows"></th>
                </tr>
              </thead>
              <tbody>
                <tr class="align-middle" v-for="host in hosts">
                  <td v-for="column in hostsTableColumns" :key="column.field">
                    <span v-html="host[column.field]"></span>
                  </td>
                  <td class="text-end" v-if="isWindows">
                    <button type="button" class="btn btn-sm btn-outline-danger" @click="deleteHost(host.hostname)" :disabled="isHostsDeleting.includes(host.hostname)">
                      <span v-if="isHostsDeleting.includes(host.hostname)" class="spinner-border spinner-border-sm" aria-hidden="true"></span>
                      <output v-if="isHostsDeleting.includes(host.hostname)" class="visually-hidden">Deleting...</output>
                      <i v-if="!isHostsDeleting.includes(host.hostname)" class="bi bi-trash"></i>
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

<!-- toast -->

    <div id="toast-container" class="toast-container position-fixed bottom-0 end-0 p-3">
    </div>

<!-- modal: port forwarding -->

    <div class="modal fade" id="portForwardingModal" tabindex="-1" aria-labelledby="portForwardingModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="portForwardingModalLabel">Port Forwarding</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="input-group mb-2">
              <label class="input-group-text" for="portForwardingMode">Mode</label>
              <select class="form-select" id="portForwardingMode" v-model="portForwardingModalProperties.mode">
                <option value="local">Remote Port</option>
                <option value="other">Remote Host and Port</option>
              </select>
            </div>
            <div class="input-group mb-2" v-if="portForwardingModalProperties.mode == 'other'">
              <span class="input-group-text" id="portForwardingHostLabel">Remote Host</span>
              <input id="portForwardingHost" type="text" class="form-control" placeholder="google.com" aria-label="Host" aria-describedby="portForwardingHostLabel" v-model="portForwardingModalProperties.remoteHost">
            </div>
            <div class="input-group mb-2">
              <span class="input-group-text" id="portForwardingPortLabel">Remote Port</span>
              <input id="portForwardingPort" type="text" class="form-control" placeholder="80" aria-label="Port" aria-describedby="portForwardingPortLabel" max="65535" v-model="portForwardingModalProperties.remotePort">
            </div>
            <div class="input-group mb-2" v-if="isWindows">
              <label class="input-group-text" for="portForwardingUsername">Username</label>
              <select class="form-select" id="portForwardingUsername" v-model="portForwardingModalProperties.username">
                <option v-for="cred in prefCredentials" :value="cred.username" v-html="cred.username"></option>
              </select>
            </div>
            <div class="form-check form-switch" v-if="isWindows">
              <input class="form-check-input" type="checkbox" role="switch" aria-checked="false" id="createHostEntry" v-model="portForwardingModalProperties.hostentry">
              <label class="form-check-label" for="createHostEntry">Create host entry</label>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            <button type="button" class="btn btn-primary" @click="startPortForwarding" :disabled="isPortForwardingStarting">
              <span v-if="isPortForwardingStarting" class="spinner-border spinner-border-sm" aria-hidden="true"></span>
              <output v-if="isPortForwardingStarting">&nbsp;Connecting...</output>
              <span v-if="!isPortForwardingStarting">Connect</span>
            </button>
          </div>
        </div>
      </div>
    </div>

<!-- modal: port mappings -->

    <div class="modal fade" id="portMappingsModal" tabindex="-1" aria-labelledby="portMappingsModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="portMappingsModalLabel">Port Mapping</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="mb-2">
              <small>
                <div class="pb-2">
                  Port mappings allow you to define static local ports for port forwarding to
                  remote ports on the instance.
                </div>
                <div class="pb-2">
                  Optionally, you can specify a remote host to forward to a different host from the
                  instance. This can be useful for accessing services that are not running on the
                  instance itself, for example RDS.
                </div>
                <div class="pb-2">
                  Local ports must be unique across all instances.
                </div>
              </small>
            </div>
            <div v-if="portMappingsModalProperties.length === 0" class="text-center text-muted border-top pt-2">
              <i class="bi bi-arrow-left-right fs-2"></i>
              <p class="">No port mappings</p>
            </div>
            <div v-for="(mapping, index) in portMappingsModalProperties" :key="index" class="border-top border-primary pt-2">
              <div class="row mt-2 mb-2 align-items-center">
                <div class="col-5 pb-2">
                  <div class="input-group input-group-sm">
                    <span class="input-group-text" :id="'portMappingLocal' + index">Local</span>
                    <input type="number" class="form-control" v-model="mapping.local_port" aria-label="Local" aria-describedby="'portMappingLocal' + index" max="65535">
                  </div>
                </div>
                <div class="col-5 pb-2">
                  <div class="input-group input-group-sm">
                    <span class="input-group-text" :id="'portMappingRemote' + index">Remote</span>
                    <input type="number" class="form-control" v-model="mapping.remote_port" aria-label="Remote" aria-describedby="'portMappingRemote' + index" max="65535">
                  </div>
                </div>
                <div class="col-2 d-flex justify-content-end align-items-start">
                  <button type="button" class="btn btn-sm btn-outline-danger" @click="removePortMapping(index)" :disabled="portMappings.length === 1">
                    <i class="bi bi-trash"></i>
                  </button>
                </div>
              </div>
              <div class="row mt-2 mb-2 align-items-center">
                <div class="col-10 pb-2">
                  <div class="input-group input-group-sm">
                    <span class="input-group-text" :id="'portMappingHost' + index">Remote Host</span>
                    <input type="text" class="form-control" v-model="mapping.remote_host" placeholder="Optional" aria-label="Remote Host (Optional)" aria-describedby="'portMappingHost' + index" max="65535">
                  </div>
                </div>
              </div>
            </div>
            <div class="border-top pt-2 mt-2">
              <button type="button" class="btn btn-primary w-100" @click="addPortMapping">
                Add Mapping
              </button>
            </div>
          </div>
          <div class="modal-footer">
            <span v-if="portMappingsModalDuplicatePort" class="text-danger me-4">
              <small>
                <i class="bi bi-exclamation-triangle-fill"></i>
                <span class="ps-2">Duplicate local port detected.</span>
              </small>
            </span>
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            <button type="button" class="btn btn-success"
              @click="savePortMappings(portMappingsModalInstance.id, portMappingsModalInstance.name)"
              :disabled="portMappingsModalDuplicatePort"
              :aria-disabled="portMappingsModalDuplicatePort"
            >
              Save
            </button>
          </div>
        </div>
      </div>
    </div>

<!-- modal: profiles - sessions -->

    <div class="modal fade" id="addSessionModal" tabindex="-1" aria-labelledby="addSessionModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="addSessionModalLabel">Add Session</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="input-group mb-2" v-for="column in sessionsTableColumns">
              <span class="input-group-text" :id="'session_' + column.field + 'Label'" v-html="column.title"></span>
              <select v-if="column.field === 'sso_region'" :id="'session_' + column.field" class="form-select"
                :aria-label="column.title" :aria-describedby="'session_' + column.field + 'Label'"
                v-model="addSessionModalProperties[column.field]">
                <option v-for="region in regionsAll" :value="region" v-html="region"></option>
              </select>
              <input v-if="column.field !== 'sso_region'" :id="'session_' + column.field" type="text" class="form-control" placeholder=""
                :aria-label="column.title" :aria-describedby="'session_' + column.field + 'Label'"
                v-model="addSessionModalProperties[column.field]">
            </div>
          </div>
          <div class="modal-footer">
            <span v-if="!addSessionModalValid" class="text-danger me-4">
              <small>
                <i class="bi bi-exclamation-triangle-fill"></i>
                <span class="ps-2">Invalid session name.</span>
              </small>
            </span>
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            <button type="button" class="btn btn-primary" @click="addSession" :disabled="isSessionAdding || !addSessionModalValid">
              <span v-if="isSessionAdding" class="spinner-border spinner-border-sm" aria-hidden="true"></span>
              <output v-if="isSessionAdding" class="visually-hidden">Adding...</output>
              <span v-if="!isSessionAdding">Add</span>
            </button>
          </div>
        </div>
      </div>
    </div>

<!-- modal: profiles - profiles -->

    <div class="modal fade" id="addProfileModal" tabindex="-1" aria-labelledby="addProfileModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="addProfileModalLabel">Add Profile</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="input-group mb-2" v-for="column in profilesTableColumns">
              <span class="input-group-text" :id="'profile_' + column.field + 'Label'" v-html="column.title"></span>
              <select v-if="['sso_session', 'region'].includes(column.field)" :id="'profile_' + column.field" class="form-select"
                :aria-label="column.title" :aria-describedby="'profile_' + column.field + 'Label'"
                v-model="addProfileModalProperties[column.field]">
                <option value=""></option>
                <option v-if="column.field === 'sso_session'" v-for="session in sessions" :value="session.name" v-html="session.name"></option>
                <option v-if="column.field === 'region'" v-for="region in regionsAll" :value="region" v-html="region"></option>
              </select>
              <input v-if="!['sso_session', 'region'].includes(column.field)" :id="'profile_' + column.field" type="text" class="form-control" placeholder=""
                :aria-label="column.title" :aria-describedby="'profile_' + column.field + 'Label'"
                v-model="addProfileModalProperties[column.field]">
            </div>
          </div>
          <div class="modal-footer">
            <span v-if="!addProfileModalValid" class="text-danger me-4">
              <small>
                <i class="bi bi-exclamation-triangle-fill"></i>
                <span class="ps-2">Invalid profile name.</span>
              </small>
            </span>
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            <button type="button" class="btn btn-primary" @click="addProfile" :disabled="isProfileAdding || !addProfileModalValid">
              <span v-if="isProfileAdding" class="spinner-border spinner-border-sm" aria-hidden="true"></span>
              <output v-if="isProfileAdding" class="visually-hidden">Adding...</output>
              <span v-if="!isProfileAdding">Add</span>
            </button>
          </div>
        </div>
      </div>
    </div>

<!-- modal: hosts -->

    <div class="modal fade" id="addHostModal" tabindex="-1" aria-labelledby="addHostModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="addHostModalLabel">Add Host</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="input-group mb-2" v-for="column in hostsTableColumns">
              <span class="input-group-text" :id="'host_' + column.field + 'Label'" v-html="column.title"></span>
              <input :id="'host_' + column.field" type="text" class="form-control" placeholder=""
                :aria-label="column.title" :aria-describedby="'host_' + column.field + 'Label'"
                v-model="addHostModalProperties[column.field]">
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            <button type="button" class="btn btn-primary" @click="addHost(addHostModalProperties.hostname, addHostModalProperties.ip)" :disabled="isHostsAdding">
              <span v-if="isHostsAdding" class="spinner-border spinner-border-sm" aria-hidden="true"></span>
              <output v-if="isHostsAdding" class="visually-hidden">Adding...</output>
              <span v-if="!isHostsAdding">Add</span>
            </button>
          </div>
        </div>
      </div>
    </div>

<!-- footer -->

    <footer></footer>

  </main>
</body>
</html>
